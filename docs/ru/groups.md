## class Groups

- [Свойства менеджера групп](#Свойства-менеджера-групп)
- [Методы](#Методы)
  - [Добавить группу](#Добавить-группу)
  - [Удалить-группу](#Удалить-группу)
  - [Получить данные групп](#Получить-данные-групп)
  - [Добавить подписчика](#Добавить-подписчика)
  - [Удалить подписчика](#Удалить-подписчика)
  - [Отправить групповое сообщение](#Отправить-групповое-сообщение)

Класс Группы (менеджер групп). Находится в свойстве сервера
`groups`.

### Свойства менеджера групп

| name | type | description |
| --- | --- | --- |
| server | Object | Сервер `class Server` |
| groups | Object | Список групп. Ключ - `id` группы. Значение - объект группы `class Group` |  
| cache | Object | Кэш групп, объект со свойством `groups`. Ключ - `id` группы. Значение - массив `id` подписчиков (клиентских соединений `calss WS`) |

### Методы

#### Добавить группу

Добавить новую группу в менеджер групп `add`, параметры:

| name | type | description |
| --- | --- | --- |
| id | string | `id` группы |
| ws | Object | Клиентское соединения подписчика `class WS`. Если задано, то подписчик будет подписан на добавляемую группу |
| data | Object | Объект с любой пользовательской информацией о группе |

#### Удалить группу

Удалить группу, послать клонам команду удалить группу `delete`, параметры:

| name | type | description |
| --- | --- | --- |
| id | string | `id` группы |
| excludeClones | Array | Массив `id` клонов, которым уже послали сообщение о удалении другие клоны |

#### Получить данные групп

Получить данные групп(ы) `get`, параметры:

| name | type | description |
| --- | --- | --- |
| id | string | `id` группы |

Вернет кэш групп, если задан `id`, то кэш группы `class Group`.

#### Добавить подписчика

Добавить подписчика в группу `addSubscriber`, параметры:

| name | type | description |
| --- | --- | --- |
| id | string | `id` группы |
| ws | Object | Клиентское соединения подписчика `class WS` |

#### Удалить подписчика

Удалить подписчика(ов) `deleteSubscriber`, параметры:

| name | type | description |
| --- | --- | --- |
| id | string | `id` группы, если группа не задана, то подписчик удаляется из всех групп |
| ws | Object | Клиентское соединения подписчика `class WS` |

#### Отправить групповое сообщение

Послать сообщение подписчикам групп(ы). Клоны так же получают сообщение. `async sendMes`, параметры:

| name | type | description |
| --- | --- | --- |
| id | null/string/Array | `id` группы. Если не задан, сообщение рассылается всем группам. Если задан `id`, то посылается в группу. Если задан массив `id`, то рассылается указанным группам |
| route | string | Маршрут |
| act | string | Действие которое требуется выполнить относительно пути |
| data | * | Данные которые требуется отправить |
| withoutId | string | `id` клиента которого исключить из рассылки |
| sendParallel | number | Количество подписчиков которым параллельно рассылать сообщение [jrf-pip](https://github.com/jirufik/jrf-pip) |
| excludeClones | Array | массив `id` клонов, которым уже послали сообщение другие клоны |